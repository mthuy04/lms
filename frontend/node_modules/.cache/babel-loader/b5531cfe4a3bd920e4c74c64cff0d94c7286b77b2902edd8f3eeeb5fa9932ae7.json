{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Downloads/library-ms/frontend/src/App.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$();\n// App.jsx\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport axios from 'axios';\nimport { LogIn, User, BookOpen, Settings, Home, Plus, Trash2, RotateCcw, Save } from 'lucide-react';\n\n// Cấu hình Axios trỏ đến backend Flask\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://127.0.0.1:5001/api'; // Đảm bảo port khớp\naxios.defaults.baseURL = API_BASE_URL;\n// KHÔNG SET HEADER MẶC ĐỊNH Ở ĐÂY NỮA\n\n// --- Cài đặt Tailwind CDN (Giữ nguyên) ---\n(function () {\n  if (!document.getElementById('tailwind-cdn')) {\n    const script = document.createElement('script');\n    script.src = 'https://cdn.tailwindcss.com';\n    script.id = 'tailwind-cdn';\n    document.head.appendChild(script);\n  }\n})();\n\n// --- Custom Hook quản lý State Global ---\nconst useAppState = () => {\n  _s();\n  // State khởi tạo an toàn từ localStorage\n  const [user, setUser] = useState(() => {\n    try {\n      const d = localStorage.getItem('user_data');\n      return d && d !== 'undefined' && d !== 'null' ? JSON.parse(d) : null;\n    } catch (e) {\n      console.error(\"Lỗi parse user_data:\", e);\n      localStorage.removeItem('user_data');\n      return null;\n    }\n  });\n  const [token, setToken] = useState(() => {\n    const t = localStorage.getItem('jwt_token');\n    return t && t !== 'null' && t !== 'undefined' ? t : null;\n  });\n  const [route, setRoute] = useState(token ? (user === null || user === void 0 ? void 0 : user.role) === 'admin' ? 'dashboard' : 'books' : 'home');\n  const [message, setMessage] = useState({\n    text: '',\n    type: ''\n  });\n  const [loading, setLoading] = useState(false);\n\n  // Lưu user vào localStorage khi thay đổi\n  useEffect(() => {\n    if (user) {\n      localStorage.setItem('user_data', JSON.stringify(user));\n    } else {\n      localStorage.removeItem('user_data');\n    }\n  }, [user]);\n\n  // Hàm thông báo (stable)\n  const notify = useCallback((text, type = 'success') => {\n    setMessage({\n      text,\n      type\n    });\n    setTimeout(() => setMessage({\n      text: '',\n      type: ''\n    }), 4000);\n  }, []);\n\n  // Hàm logout (stable)\n  const logout = useCallback(() => {\n    console.log(\"Đang đăng xuất...\");\n    localStorage.removeItem('jwt_token');\n    localStorage.removeItem('user_data');\n    setToken(null);\n    setUser(null);\n    setRoute('home');\n  }, []); // Các setter là stable\n\n  // Hàm login (stable)\n  const login = useCallback((userData, jwtToken) => {\n    console.log('Login với:', {\n      userData,\n      jwtToken\n    });\n    localStorage.setItem('jwt_token', jwtToken);\n    localStorage.setItem('user_data', JSON.stringify(userData));\n    setToken(jwtToken);\n    setUser(userData);\n    setRoute((userData === null || userData === void 0 ? void 0 : userData.role) === 'admin' ? 'dashboard' : 'books');\n  }, [setRoute]); // setRoute stable\n\n  // Hàm fetch profile (stable) - NHẬN TOKEN LÀM ĐỐI SỐ\n  const fetchProfile = useCallback(async authToken => {\n    if (!authToken) {\n      console.log(\"fetchProfile: Không có token.\");\n      return;\n    }\n    // Không setLoading global ở đây\n    try {\n      // GỬI TOKEN TRONG HEADER\n      const res = await axios.get('/profile', {\n        headers: {\n          'Authorization': `Bearer ${authToken}`\n        }\n      });\n      setUser(prevUser => ({\n        ...(prevUser || {}),\n        ...res.data\n      }));\n    } catch (error) {\n      var _error$response;\n      console.error('Lỗi fetch profile:', ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n      if (error.response && (error.response.status === 401 || error.response.status === 422)) {\n        notify('Phiên làm việc lỗi/hết hạn.', 'error');\n        logout(); // Tự động logout\n      } else {\n        notify('Không thể tải hồ sơ.', 'error');\n      }\n    }\n  }, [logout, notify]); // Phụ thuộc hàm stable\n\n  const isAdmin = useMemo(() => (user === null || user === void 0 ? void 0 : user.role) === 'admin', [user]);\n  const isLibrarian = useMemo(() => (user === null || user === void 0 ? void 0 : user.role) === 'librarian', [user]);\n  const isLibrarianOrAdmin = useMemo(() => isAdmin || isLibrarian, [isAdmin, isLibrarian]);\n  return {\n    user,\n    token,\n    route,\n    setRoute,\n    login,\n    logout,\n    message,\n    loading,\n    setLoading,\n    notify,\n    fetchProfile,\n    isAdmin,\n    isLibrarianOrAdmin\n  };\n};\n\n// --- Các Component Chung ---\n_s(useAppState, \"WKq6DE73o0rOU7UUeS/zHmHsNN4=\");\nconst Notification = ({\n  message\n}) => {\n  /* Giữ nguyên */if (!message || !message.text) return null;\n  const c = message.type === 'success' ? 'bg-emerald-500' : 'bg-red-500';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `fixed top-4 right-4 z-50 p-4 rounded-lg text-white font-semibold shadow-xl ${c}`,\n    children: message.text\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 181\n  }, this);\n};\n_c = Notification;\nconst Header = ({\n  user,\n  setRoute,\n  logout\n}) =>\n/*#__PURE__*/\n/* Giữ nguyên */\n_jsxDEV(\"header\", {\n  className: \"bg-stone-900 shadow-xl text-white sticky top-0 z-40\",\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto px-4 py-4 flex justify-between items-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-4 cursor-pointer\",\n      onClick: () => setRoute('home'),\n      children: [/*#__PURE__*/_jsxDEV(BookOpen, {\n        className: \"h-7 w-7 text-rose-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 311\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold text-rose-100\",\n        children: \"LMS Pro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 357\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 218\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"flex items-center space-x-4\",\n      children: [/*#__PURE__*/_jsxDEV(NavItem, {\n        icon: Home,\n        label: \"Home\",\n        onClick: () => setRoute('home')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 469\n      }, this), user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(NavItem, {\n          icon: BookOpen,\n          label: \"Books\",\n          onClick: () => setRoute('books')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 549\n        }, this), /*#__PURE__*/_jsxDEV(NavItem, {\n          icon: User,\n          label: \"Profile\",\n          onClick: () => setRoute('profile')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 624\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: logout,\n          className: \"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700\",\n          children: [/*#__PURE__*/_jsxDEV(LogIn, {\n            className: \"h-5 w-5 rotate-180\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 824\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Logout (\", user.username || 'User', \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 864\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 699\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(NavItem, {\n          icon: LogIn,\n          label: \"Login\",\n          onClick: () => setRoute('login')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 930\n        }, this), /*#__PURE__*/_jsxDEV(NavItem, {\n          icon: User,\n          label: \"Register\",\n          onClick: () => setRoute('register')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 1002\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 424\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 139\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 87,\n  columnNumber: 67\n}, this);\n_c2 = Header;\nconst NavItem = ({\n  icon: Icon,\n  label,\n  onClick\n}) =>\n/*#__PURE__*/\n/* Giữ nguyên */\n_jsxDEV(\"button\", {\n  onClick: onClick,\n  className: \"flex items-center space-x-2 px-4 py-2 text-rose-100 hover:text-rose-300 transition duration-150\",\n  children: [/*#__PURE__*/_jsxDEV(Icon, {\n    className: \"h-5 w-5\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 206\n  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n    children: label\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 234\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 88,\n  columnNumber: 72\n}, this);\n_c3 = NavItem;\nconst Card = ({\n  children,\n  className = ''\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: `bg-white rounded-xl shadow-md overflow-hidden ${className}`,\n  children: children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 90,\n  columnNumber: 48\n}, this);\n\n// --- Component Đăng Nhập ---\n_c4 = Card;\nconst LoginPage = ({\n  appState\n}) => {\n  _s2();\n  const {\n    login,\n    notify,\n    loading,\n    setLoading\n  } = appState;\n  const [credentials, setCredentials] = useState({\n    username: '',\n    password: ''\n  });\n  const handleChange = e => setCredentials(prev => ({\n    ...prev,\n    [e.target.name]: e.target.value\n  }));\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (loading) return;\n    setLoading(true);\n    try {\n      const res = await axios.post('/login', credentials);\n      login(res.data.user, res.data.access_token);\n      notify('Đăng nhập thành công!');\n    } catch (error) {\n      var _error$response2;\n      console.error('Lỗi đăng nhập:', ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error.message);\n      notify('Đăng nhập thất bại.', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto p-8 max-w-md\",\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      className: \"p-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-stone-800 mb-6 text-center\",\n        children: \"\\u0110\\u0103ng nh\\u1EADp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(InputField, {\n          label: \"T\\xEAn \\u0111\\u0103ng nh\\u1EADp\",\n          name: \"username\",\n          type: \"text\",\n          value: credentials.username,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InputField, {\n          label: \"M\\u1EADt kh\\u1EA9u\",\n          name: \"password\",\n          type: \"password\",\n          value: credentials.password,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: loading,\n          className: \"w-full p-3 bg-rose-600 text-white rounded-lg font-medium hover:bg-rose-700 transition duration-150 disabled:bg-gray-400\",\n          children: loading ? 'Đang xử lý...' : 'Đăng nhập'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, this);\n};\n\n// --- Component Đăng Ký ---\n_s2(LoginPage, \"rueEJbdnZgcg1jOuSt/nqRO3DUA=\");\n_c5 = LoginPage;\nconst RegisterPage = ({\n  appState\n}) => {\n  _s3();\n  const {\n    login,\n    notify,\n    loading,\n    setLoading\n  } = appState;\n  const [formData, setFormData] = useState({\n    username: '',\n    email: '',\n    password: '',\n    role: 'user'\n  });\n  const handleChange = e => setFormData(prev => ({\n    ...prev,\n    [e.target.name]: e.target.value\n  }));\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (loading) return;\n    setLoading(true);\n    try {\n      const res = await axios.post('/register', formData);\n      login(res.data.user, res.data.access_token);\n      notify('Đăng ký thành công!');\n    } catch (error) {\n      var _error$response3;\n      console.error('Lỗi đăng ký:', ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || error.message);\n      notify('Đăng ký thất bại.', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto p-8 max-w-md\",\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      className: \"p-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-stone-800 mb-6 text-center\",\n        children: \"\\u0110\\u0103ng k\\xFD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(InputField, {\n          label: \"T\\xEAn \\u0111\\u0103ng nh\\u1EADp\",\n          name: \"username\",\n          type: \"text\",\n          value: formData.username,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InputField, {\n          label: \"Email\",\n          name: \"email\",\n          type: \"email\",\n          value: formData.email,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InputField, {\n          label: \"M\\u1EADt kh\\u1EA9u\",\n          name: \"password\",\n          type: \"password\",\n          value: formData.password,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"role\",\n          value: formData.role,\n          onChange: handleChange,\n          className: \"w-full p-3 border border-stone-300 rounded-lg focus:border-rose-500 focus:ring-1 focus:ring-rose-500\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"user\",\n            children: \"Ng\\u01B0\\u1EDDi d\\xF9ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"librarian\",\n            children: \"Th\\u1EE7 th\\u01B0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"admin\",\n            children: \"Qu\\u1EA3n tr\\u1ECB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: loading,\n          className: \"w-full p-3 bg-rose-600 text-white rounded-lg font-medium hover:bg-rose-700 transition duration-150 disabled:bg-gray-400\",\n          children: loading ? 'Đang xử lý...' : 'Đăng ký'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 155,\n    columnNumber: 5\n  }, this);\n};\n\n// --- Component Hồ Sơ ---\n_s3(RegisterPage, \"mac2bWQAkYHdD5sfMYaAiYm3wFE=\");\n_c6 = RegisterPage;\nconst ProfilePage = ({\n  appState\n}) => {\n  _s4();\n  const {\n    user,\n    token,\n    fetchProfile,\n    notify,\n    loading,\n    setLoading\n  } = appState;\n  const [profileData, setProfileData] = useState(user || {});\n  const [editMode, setEditMode] = useState(false);\n  useEffect(() => {\n    if (token && !(user !== null && user !== void 0 && user.email)) fetchProfile(token);\n  }, [token, user, fetchProfile]);\n  const handleChange = e => setProfileData(prev => ({\n    ...prev,\n    [e.target.name]: e.target.value\n  }));\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (loading) return;\n    setLoading(true);\n    try {\n      const res = await axios.put('/profile', profileData, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setProfileData(res.data);\n      appState.setUser(res.data); // Cập nhật global user\n      notify('Cập nhật hồ sơ thành công!');\n      setEditMode(false);\n    } catch (error) {\n      var _error$response4;\n      console.error('Lỗi cập nhật hồ sơ:', ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data) || error.message);\n      notify('Không thể cập nhật hồ sơ.', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto p-8 max-w-md\",\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      className: \"p-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-stone-800 mb-6 text-center\",\n        children: \"H\\u1ED3 s\\u01A1 c\\xE1 nh\\xE2n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), editMode ? /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(InputField, {\n          label: \"T\\xEAn \\u0111\\u0103ng nh\\u1EADp\",\n          name: \"username\",\n          type: \"text\",\n          value: profileData.username || '',\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(InputField, {\n          label: \"Email\",\n          name: \"email\",\n          type: \"email\",\n          value: profileData.email || '',\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            className: \"flex-1 p-3 bg-rose-600 text-white rounded-lg font-medium hover:bg-rose-700 disabled:bg-gray-400\",\n            children: loading ? 'Đang lưu...' : 'Lưu'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => setEditMode(false),\n            className: \"flex-1 p-3 bg-gray-500 text-white rounded-lg font-medium hover:bg-gray-600\",\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-stone-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"T\\xEAn \\u0111\\u0103ng nh\\u1EADp:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 43\n          }, this), \" \", profileData.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-stone-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 43\n          }, this), \" \", profileData.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-stone-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Vai tr\\xF2:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 43\n          }, this), \" \", profileData.role]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setEditMode(true),\n          className: \"w-full p-3 bg-rose-600 text-white rounded-lg font-medium hover:bg-rose-700\",\n          children: \"Ch\\u1EC9nh s\\u1EEDa\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 207,\n    columnNumber: 5\n  }, this);\n};\n\n// --- Component Bảng Điều Khiển (Sách) ---\n_s4(ProfilePage, \"xzlrGTSSduNfKWbLz+0L8Qvc8h8=\");\n_c7 = ProfilePage;\nconst DashboardPage = ({\n  appState\n}) => {\n  _s5();\n  const {\n    token,\n    isLibrarianOrAdmin,\n    notify,\n    loading,\n    setLoading,\n    fetchProfile\n  } = appState;\n  const [books, setBooks] = useState([]);\n  const [search, setSearch] = useState('');\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [newBookData, setNewBookData] = useState({\n    title: '',\n    author: '',\n    isbn: '',\n    published_year: '',\n    genre: '',\n    stock: ''\n  });\n  useEffect(() => {\n    const loadBooks = async () => {\n      setLoading(true);\n      try {\n        const res = await axios.get('/books', {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        setBooks(res.data);\n      } catch (error) {\n        var _error$response5, _error$response6, _error$response7;\n        console.error('Lỗi tải sách:', ((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.data) || error.message);\n        if (((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : _error$response6.status) === 401 || ((_error$response7 = error.response) === null || _error$response7 === void 0 ? void 0 : _error$response7.status) === 422) {\n          notify('Phiên hết hạn.', 'error');\n          appState.logout();\n        } else {\n          notify('Không thể tải sách.', 'error');\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (token) loadBooks();\n  }, [token, notify, setLoading, appState.logout]);\n  const handleSearch = e => setSearch(e.target.value.toLowerCase());\n  const filteredBooks = books.filter(book => book.title.toLowerCase().includes(search) || book.author.toLowerCase().includes(search));\n  const handleAddBook = async e => {\n    e.preventDefault();\n    if (loading) return;\n    setLoading(true);\n    try {\n      const newBook = {\n        title: newBookData.title,\n        author: newBookData.author,\n        isbn: newBookData.isbn,\n        published_year: parseInt(newBookData.published_year),\n        genre: newBookData.genre,\n        stock: parseInt(newBookData.stock),\n        available_copies: parseInt(newBookData.stock) // Ban đầu bằng stock\n      };\n      const res = await axios.post('/books', newBook, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setBooks(prev => [...prev, res.data]);\n      notify('Thêm sách thành công!');\n      setNewBookData({\n        title: '',\n        author: '',\n        isbn: '',\n        published_year: '',\n        genre: '',\n        stock: ''\n      });\n      setShowAddForm(false);\n    } catch (error) {\n      var _error$response8;\n      console.error('Lỗi thêm sách:', ((_error$response8 = error.response) === null || _error$response8 === void 0 ? void 0 : _error$response8.data) || error.message);\n      notify('Không thể thêm sách.', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleBorrow = async (bookId, bookTitle) => {\n    if (loading) return;\n    setLoading(true);\n    try {\n      await axios.post('/borrow', {\n        book_id: bookId\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setBooks(prev => prev.map(b => b.id === bookId ? {\n        ...b,\n        available_copies: b.available_copies - 1\n      } : b));\n      notify(`Mượn \"${bookTitle}\" thành công!`);\n    } catch (error) {\n      var _error$response9;\n      console.error('Lỗi mượn sách:', ((_error$response9 = error.response) === null || _error$response9 === void 0 ? void 0 : _error$response9.data) || error.message);\n      notify('Không thể mượn sách.', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleChangeNewBook = e => setNewBookData(prev => ({\n    ...prev,\n    [e.target.name]: e.target.value\n  }));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto p-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold text-stone-800 mb-6\",\n      children: \"Danh s\\xE1ch s\\xE1ch\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 space-y-4 md:space-y-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"T\\xECm s\\xE1ch theo ti\\xEAu \\u0111\\u1EC1 ho\\u1EB7c t\\xE1c gi\\u1EA3...\",\n        value: search,\n        onChange: handleSearch,\n        className: \"w-full md:w-1/2 p-3 border border-stone-300 rounded-lg focus:border-rose-500 focus:ring-1 focus:ring-rose-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this), isLibrarianOrAdmin && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowAddForm(!showAddForm),\n        className: \"flex items-center space-x-2 px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700\",\n        children: [/*#__PURE__*/_jsxDEV(Plus, {\n          className: \"h-5 w-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: showAddForm ? 'Ẩn form' : 'Thêm sách'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 41\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 7\n    }, this), showAddForm && isLibrarianOrAdmin && /*#__PURE__*/_jsxDEV(Card, {\n      className: \"p-6 mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-semibold mb-4\",\n        children: \"Th\\xEAm s\\xE1ch m\\u1EDBi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleAddBook,\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(InputField, {\n          label: \"Ti\\xEAu \\u0111\\u1EC1\",\n          name: \"title\",\n          type: \"text\",\n          value: newBookData.title,\n          onChange: handleChangeNewBook,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(InputField, {\n          label: \"T\\xE1c gi\\u1EA3\",\n          name: \"author\",\n          type: \"text\",\n          value: newBookData.author,\n          onChange: handleChangeNewBook,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(InputField, {\n          label: \"ISBN\",\n          name: \"isbn\",\n          type: \"text\",\n          value: newBookData.isbn,\n          onChange: handleChangeNewBook,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(InputField, {\n          label: \"N\\u0103m xu\\u1EA5t b\\u1EA3n\",\n          name: \"published_year\",\n          type: \"number\",\n          value: newBookData.published_year,\n          onChange: handleChangeNewBook,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(InputField, {\n          label: \"Th\\u1EC3 lo\\u1EA1i\",\n          name: \"genre\",\n          type: \"text\",\n          value: newBookData.genre,\n          onChange: handleChangeNewBook,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(InputField, {\n          label: \"S\\u1ED1 l\\u01B0\\u1EE3ng\",\n          name: \"stock\",\n          type: \"number\",\n          value: newBookData.stock,\n          onChange: handleChangeNewBook,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: loading,\n          className: \"md:col-span-2 p-3 bg-rose-600 text-white rounded-lg font-medium hover:bg-rose-700 disabled:bg-gray-400\",\n          children: loading ? 'Đang thêm...' : 'Thêm sách'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 9\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-stone-600\",\n      children: \"\\u0110ang t\\u1EA3i...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",\n      children: filteredBooks.map(book => /*#__PURE__*/_jsxDEV(Card, {\n        className: \"p-4 flex flex-col justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-stone-800\",\n            children: book.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-stone-600\",\n            children: [\"T\\xE1c gi\\u1EA3: \", book.author]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-stone-600\",\n            children: [\"N\\u0103m: \", book.published_year]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-stone-600\",\n            children: [\"Th\\u1EC3 lo\\u1EA1i: \", book.genre]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-stone-600\",\n            children: [\"C\\xF3 s\\u1EB5n: \", book.available_copies, \" / \", book.stock]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleBorrow(book.id, book.title),\n          disabled: book.available_copies === 0 || !token,\n          className: `mt-3 w-full p-2 bg-rose-600 text-white rounded-lg font-medium hover:bg-rose-700 transition duration-150 disabled:bg-gray-400 disabled:cursor-not-allowed`,\n          children: token ? book.available_copies === 0 ? 'Hết sách' : 'Mượn sách' : 'Đăng nhập để mượn'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 15\n        }, this)]\n      }, book.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 316,\n    columnNumber: 5\n  }, this);\n};\n\n// --- Component Trang Chủ ---\n_s5(DashboardPage, \"UAzoBQTNWQhwjDMFQ2t9dG0nMN8=\");\n_c8 = DashboardPage;\nconst HomePage = () =>\n/*#__PURE__*/\n/* Giữ nguyên */\n_jsxDEV(\"div\", {\n  className: \"container mx-auto px-4 py-16 text-center\",\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-3xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-5xl font-extrabold text-stone-900 mb-4\",\n      children: \"H\\u1EC7 th\\u1ED1ng Qu\\u1EA3n l\\xFD Th\\u01B0 vi\\u1EC7n N\\xE2ng cao\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 136\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xl text-stone-600 mb-8\",\n      children: \"Gi\\u1EA3i ph\\xE1p hi\\u1EC7n \\u0111\\u1EA1i...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 235\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid md:grid-cols-3 gap-6 mt-10\",\n      children: [/*#__PURE__*/_jsxDEV(FeatureCard, {\n        icon: User,\n        title: \"B\\u1EA3o m\\u1EADt theo vai tr\\xF2\",\n        description: \"Ph\\xE2n quy\\u1EC1n...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 352\n      }, this), /*#__PURE__*/_jsxDEV(FeatureCard, {\n        icon: BookOpen,\n        title: \"Danh m\\u1EE5c th\\u1EDDi gian th\\u1EF1c\",\n        description: \"Xem t\\xECnh tr\\u1EA1ng...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 436\n      }, this), /*#__PURE__*/_jsxDEV(FeatureCard, {\n        icon: Settings,\n        title: \"H\\u1ED3 s\\u01A1 n\\xE2ng cao\",\n        description: \"H\\u1ED3 s\\u01A1 ng\\u01B0\\u1EDDi d\\xF9ng...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 531\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 303\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 367,\n    columnNumber: 101\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 367,\n  columnNumber: 43\n}, this);\n_c9 = HomePage;\nconst FeatureCard = ({\n  icon: Icon,\n  title,\n  description\n}) =>\n/*#__PURE__*/\n/* Giữ nguyên */\n_jsxDEV(Card, {\n  className: \"flex flex-col items-center text-center p-6 bg-rose-50 border-t-4 border-rose-600 hover:shadow-lg transition duration-300\",\n  children: [/*#__PURE__*/_jsxDEV(Icon, {\n    className: \"w-10 h-10 text-rose-600 mb-3\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 368,\n    columnNumber: 219\n  }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n    className: \"text-xl font-semibold text-stone-800 mb-2\",\n    children: title\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 368,\n    columnNumber: 268\n  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"text-stone-600\",\n    children: description\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 368,\n    columnNumber: 338\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 368,\n  columnNumber: 80\n}, this);\n\n// --- Các Component \"Giữ chỗ\" cho Admin ---\n_c0 = FeatureCard;\nconst UserManagementPage = ({\n  appState\n}) =>\n/*#__PURE__*/\n/* Giữ nguyên */\n_jsxDEV(\"div\", {\n  className: \"container mx-auto p-8\",\n  children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n    className: \"text-3xl font-bold text-stone-800\",\n    children: \"Qu\\u1EA3n l\\xFD ng\\u01B0\\u1EDDi d\\xF9ng\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 371,\n    columnNumber: 104\n  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"mt-4 text-stone-600\",\n    children: \"(S\\u1EAFp ra m\\u1EAFt...)\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 371,\n    columnNumber: 177\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 371,\n  columnNumber: 65\n}, this);\n_c1 = UserManagementPage;\nconst SettingsPage = ({\n  appState\n}) =>\n/*#__PURE__*/\n/* Giữ nguyên */\n_jsxDEV(\"div\", {\n  className: \"container mx-auto p-8\",\n  children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n    className: \"text-3xl font-bold text-stone-800\",\n    children: \"C\\xE0i \\u0111\\u1EB7t\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 372,\n    columnNumber: 98\n  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"mt-4 text-stone-600\",\n    children: \"(S\\u1EAFp ra m\\u1EAFt...)\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 372,\n    columnNumber: 160\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 372,\n  columnNumber: 59\n}, this);\n\n// --- Component App Chính ---\n_c10 = SettingsPage;\nconst App = () => {\n  _s6();\n  const appState = useAppState();\n  const {\n    route,\n    token,\n    user,\n    isAdmin,\n    logout\n  } = appState;\n\n  // Logic render nội dung chính, xử lý routing chuẩn\n  const renderContent = useMemo(() => {\n    // ---- Khi CHƯA ĐĂNG NHẬP ----\n    if (!token) {\n      switch (route) {\n        case 'login':\n          return /*#__PURE__*/_jsxDEV(LoginPage, {\n            appState: appState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 34\n          }, this);\n        case 'register':\n          return /*#__PURE__*/_jsxDEV(RegisterPage, {\n            appState: appState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 37\n          }, this);\n        default:\n          return /*#__PURE__*/_jsxDEV(HomePage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 29\n          }, this);\n        // Mọi route khác về home\n      }\n    }\n    // ---- Khi ĐÃ ĐĂNG NHẬP ----\n    switch (route) {\n      case 'profile':\n        return /*#__PURE__*/_jsxDEV(ProfilePage, {\n          appState: appState\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 30\n        }, this);\n      case 'dashboard':\n        return isAdmin ? /*#__PURE__*/_jsxDEV(AdminDashboard, {\n          appState: appState\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 42\n        }, this) : /*#__PURE__*/_jsxDEV(DashboardPage, {\n          appState: appState\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 83\n        }, this);\n      // Admin dashboard hoặc user dashboard (sách)\n      case 'books':\n        return /*#__PURE__*/_jsxDEV(DashboardPage, {\n          appState: appState\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 28\n        }, this);\n      // Luôn là trang sách\n      // Admin routes - Redirect non-admin về trang sách\n      case 'users':\n        return isAdmin ? /*#__PURE__*/_jsxDEV(UserManagementPage, {\n          appState: appState\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 38\n        }, this) : /*#__PURE__*/_jsxDEV(DashboardPage, {\n          appState: appState\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 83\n        }, this);\n      case 'settings':\n        return isAdmin ? /*#__PURE__*/_jsxDEV(SettingsPage, {\n          appState: appState\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 41\n        }, this) : /*#__PURE__*/_jsxDEV(DashboardPage, {\n          appState: appState\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 80\n        }, this);\n      case 'home':\n        return /*#__PURE__*/_jsxDEV(HomePage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 27\n        }, this);\n      // Default khi đã đăng nhập: về dashboard tương ứng\n      default:\n        return isAdmin ? /*#__PURE__*/_jsxDEV(AdminDashboard, {\n          appState: appState\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 33\n        }, this) : /*#__PURE__*/_jsxDEV(DashboardPage, {\n          appState: appState\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 74\n        }, this);\n    }\n    // Bỏ 'user' khỏi dependency array vì 'isAdmin' đã phụ thuộc vào 'user'\n  }, [route, token, isAdmin, appState]); // Dependencies chuẩn\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-stone-100 font-sans\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      user: user,\n      setRoute: appState.setRoute,\n      logout: logout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"pb-16\",\n      children: [\" \", renderContent, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Notification, {\n      message: appState.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 405,\n    columnNumber: 5\n  }, this);\n};\n\n// --- Component Admin Dashboard ---\n_s6(App, \"UN90ThBuv0YP1AdUlTTRcBnR/5o=\", false, function () {\n  return [useAppState];\n});\n_c11 = App;\nconst AdminDashboard = ({\n  appState\n}) => {\n  // Redirect nếu không phải admin\n  if (!appState.isAdmin) return /*#__PURE__*/_jsxDEV(DashboardPage, {\n    appState: appState\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 416,\n    columnNumber: 33\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto p-8 space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold text-stone-800\",\n      children: \"Admin Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-3 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(DashboardCard, {\n        title: \"Qu\\u1EA3n l\\xFD s\\xE1ch\",\n        icon: /*#__PURE__*/_jsxDEV(BookOpen, {\n          className: \"h-8 w-8 text-rose-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 51\n        }, this),\n        onClick: () => appState.setRoute('books')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DashboardCard, {\n        title: \"Qu\\u1EA3n l\\xFD ng\\u01B0\\u1EDDi d\\xF9ng\",\n        icon: /*#__PURE__*/_jsxDEV(User, {\n          className: \"h-8 w-8 text-rose-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 57\n        }, this),\n        onClick: () => appState.setRoute('users')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DashboardCard, {\n        title: \"C\\xE0i \\u0111\\u1EB7t\",\n        icon: /*#__PURE__*/_jsxDEV(Settings, {\n          className: \"h-8 w-8 text-rose-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 46\n        }, this),\n        onClick: () => appState.setRoute('settings')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 418,\n    columnNumber: 5\n  }, this);\n};\n\n// Component Card nhỏ cho Admin Dashboard\n_c12 = AdminDashboard;\nconst DashboardCard = ({\n  title,\n  icon,\n  onClick\n}) =>\n/*#__PURE__*/\n/* Giữ nguyên */\n_jsxDEV(\"button\", {\n  onClick: onClick,\n  className: \"p-6 bg-white rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-200 text-left w-full border-l-4 border-rose-500 hover:border-rose-700 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-opacity-50\",\n  children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center gap-4\",\n    children: [\" \", icon, \" \", /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-lg font-semibold text-stone-900\",\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 382\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 431,\n    columnNumber: 333\n  }, this), \" \"]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 431,\n  columnNumber: 72\n}, this);\n\n// Component InputField chung\n_c13 = DashboardCard;\nconst InputField = ({\n  label,\n  name,\n  type,\n  value,\n  onChange,\n  required = false\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n    htmlFor: name,\n    className: \"block text-sm font-medium text-stone-700 mb-1\",\n    children: label\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 436,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n    id: name,\n    name: name,\n    type: type,\n    value: value,\n    onChange: onChange,\n    required: required,\n    className: \"w-full p-3 border border-stone-300 rounded-lg focus:border-rose-500 focus:ring-1 focus:ring-rose-500\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 437,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 435,\n  columnNumber: 3\n}, this);\n_c14 = InputField;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14;\n$RefreshReg$(_c, \"Notification\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"NavItem\");\n$RefreshReg$(_c4, \"Card\");\n$RefreshReg$(_c5, \"LoginPage\");\n$RefreshReg$(_c6, \"RegisterPage\");\n$RefreshReg$(_c7, \"ProfilePage\");\n$RefreshReg$(_c8, \"DashboardPage\");\n$RefreshReg$(_c9, \"HomePage\");\n$RefreshReg$(_c0, \"FeatureCard\");\n$RefreshReg$(_c1, \"UserManagementPage\");\n$RefreshReg$(_c10, \"SettingsPage\");\n$RefreshReg$(_c11, \"App\");\n$RefreshReg$(_c12, \"AdminDashboard\");\n$RefreshReg$(_c13, \"DashboardCard\");\n$RefreshReg$(_c14, \"InputField\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","axios","LogIn","User","BookOpen","Settings","Home","Plus","Trash2","RotateCcw","Save","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE_URL","defaults","baseURL","document","getElementById","script","createElement","src","id","head","appendChild","useAppState","_s","user","setUser","d","localStorage","getItem","JSON","parse","e","console","error","removeItem","token","setToken","t","route","setRoute","role","message","setMessage","text","type","loading","setLoading","setItem","stringify","notify","setTimeout","logout","log","login","userData","jwtToken","fetchProfile","authToken","res","get","headers","prevUser","data","_error$response","response","status","isAdmin","isLibrarian","isLibrarianOrAdmin","Notification","c","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","Header","onClick","NavItem","icon","label","username","_c2","Icon","_c3","Card","_c4","LoginPage","appState","_s2","credentials","setCredentials","password","handleChange","prev","target","name","value","handleSubmit","preventDefault","post","access_token","_error$response2","onSubmit","InputField","onChange","required","disabled","_c5","RegisterPage","_s3","formData","setFormData","email","_error$response3","_c6","ProfilePage","_s4","profileData","setProfileData","editMode","setEditMode","put","_error$response4","_c7","DashboardPage","_s5","books","setBooks","search","setSearch","showAddForm","setShowAddForm","newBookData","setNewBookData","title","author","isbn","published_year","genre","stock","loadBooks","_error$response5","_error$response6","_error$response7","handleSearch","toLowerCase","filteredBooks","filter","book","includes","handleAddBook","newBook","parseInt","available_copies","_error$response8","handleBorrow","bookId","bookTitle","book_id","map","b","_error$response9","handleChangeNewBook","placeholder","_c8","HomePage","FeatureCard","description","_c9","_c0","UserManagementPage","_c1","SettingsPage","_c10","App","_s6","renderContent","AdminDashboard","_c11","DashboardCard","_c12","_c13","htmlFor","_c14","$RefreshReg$"],"sources":["/Users/admin/Downloads/library-ms/frontend/src/App.jsx"],"sourcesContent":["// App.jsx\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport axios from 'axios';\nimport { LogIn, User, BookOpen, Settings, Home, Plus, Trash2, RotateCcw, Save } from 'lucide-react';\n\n// Cấu hình Axios trỏ đến backend Flask\nconst API_BASE_URL = 'http://127.0.0.1:5001/api'; // Đảm bảo port khớp\naxios.defaults.baseURL = API_BASE_URL;\n// KHÔNG SET HEADER MẶC ĐỊNH Ở ĐÂY NỮA\n\n// --- Cài đặt Tailwind CDN (Giữ nguyên) ---\n(function() {\n  if (!document.getElementById('tailwind-cdn')) {\n    const script = document.createElement('script');\n    script.src = 'https://cdn.tailwindcss.com';\n    script.id = 'tailwind-cdn';\n    document.head.appendChild(script);\n  }\n})();\n\n// --- Custom Hook quản lý State Global ---\nconst useAppState = () => {\n    // State khởi tạo an toàn từ localStorage\n    const [user, setUser] = useState(() => {\n        try { const d = localStorage.getItem('user_data'); return d && d !== 'undefined' && d !== 'null' ? JSON.parse(d) : null; }\n        catch (e) { console.error(\"Lỗi parse user_data:\", e); localStorage.removeItem('user_data'); return null; }\n    });\n    const [token, setToken] = useState(() => {\n      const t = localStorage.getItem('jwt_token'); return (t && t !== 'null' && t !== 'undefined') ? t : null;\n    });\n    const [route, setRoute] = useState(token ? (user?.role === 'admin' ? 'dashboard' : 'books') : 'home');\n    const [message, setMessage] = useState({ text: '', type: '' });\n    const [loading, setLoading] = useState(false);\n\n    // Lưu user vào localStorage khi thay đổi\n    useEffect(() => {\n        if (user) { localStorage.setItem('user_data', JSON.stringify(user)); }\n        else { localStorage.removeItem('user_data'); }\n    }, [user]);\n\n    // Hàm thông báo (stable)\n    const notify = useCallback((text, type = 'success') => {\n        setMessage({ text, type }); setTimeout(() => setMessage({ text: '', type: '' }), 4000);\n    }, []);\n\n    // Hàm logout (stable)\n    const logout = useCallback(() => {\n        console.log(\"Đang đăng xuất...\");\n        localStorage.removeItem('jwt_token'); localStorage.removeItem('user_data');\n        setToken(null); setUser(null); setRoute('home');\n    }, []); // Các setter là stable\n\n    // Hàm login (stable)\n    const login = useCallback((userData, jwtToken) => {\n        console.log('Login với:', { userData, jwtToken });\n        localStorage.setItem('jwt_token', jwtToken); localStorage.setItem('user_data', JSON.stringify(userData));\n        setToken(jwtToken); setUser(userData);\n        setRoute(userData?.role === 'admin' ? 'dashboard' : 'books');\n    }, [setRoute]); // setRoute stable\n\n    // Hàm fetch profile (stable) - NHẬN TOKEN LÀM ĐỐI SỐ\n    const fetchProfile = useCallback(async (authToken) => {\n        if (!authToken) { console.log(\"fetchProfile: Không có token.\"); return; }\n        // Không setLoading global ở đây\n        try {\n            // GỬI TOKEN TRONG HEADER\n            const res = await axios.get('/profile', { headers: { 'Authorization': `Bearer ${authToken}` } });\n            setUser(prevUser => ({ ...(prevUser || {}), ...res.data }));\n        } catch (error) {\n            console.error('Lỗi fetch profile:', error.response?.data || error.message);\n            if (error.response && (error.response.status === 401 || error.response.status === 422)) {\n                notify('Phiên làm việc lỗi/hết hạn.', 'error'); logout(); // Tự động logout\n            } else { notify('Không thể tải hồ sơ.', 'error'); }\n        }\n    }, [logout, notify]); // Phụ thuộc hàm stable\n\n    const isAdmin = useMemo(() => user?.role === 'admin', [user]);\n    const isLibrarian = useMemo(() => user?.role === 'librarian', [user]);\n    const isLibrarianOrAdmin = useMemo(() => isAdmin || isLibrarian, [isAdmin, isLibrarian]);\n\n    return { user, token, route, setRoute, login, logout, message, loading, setLoading, notify, fetchProfile, isAdmin, isLibrarianOrAdmin };\n};\n\n// --- Các Component Chung ---\n\nconst Notification = ({ message }) => { /* Giữ nguyên */ if (!message || !message.text) return null; const c = message.type === 'success' ? 'bg-emerald-500' : 'bg-red-500'; return <div className={`fixed top-4 right-4 z-50 p-4 rounded-lg text-white font-semibold shadow-xl ${c}`}>{message.text}</div>; };\nconst Header = ({ user, setRoute, logout }) => ( /* Giữ nguyên */ <header className=\"bg-stone-900 shadow-xl text-white sticky top-0 z-40\"><div className=\"container mx-auto px-4 py-4 flex justify-between items-center\"><div className=\"flex items-center space-x-4 cursor-pointer\" onClick={() => setRoute('home')}><BookOpen className=\"h-7 w-7 text-rose-400\" /><h1 className=\"text-2xl font-bold text-rose-100\">LMS Pro</h1></div><nav className=\"flex items-center space-x-4\"><NavItem icon={Home} label=\"Home\" onClick={() => setRoute('home')} />{user ? (<><NavItem icon={BookOpen} label=\"Books\" onClick={() => setRoute('books')} /><NavItem icon={User} label=\"Profile\" onClick={() => setRoute('profile')} /><button onClick={logout} className=\"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700\"><LogIn className=\"h-5 w-5 rotate-180\" /><span>Logout ({user.username || 'User'})</span></button></>) : (<><NavItem icon={LogIn} label=\"Login\" onClick={() => setRoute('login')} /><NavItem icon={User} label=\"Register\" onClick={() => setRoute('register')} /></>)}</nav></div></header> );\nconst NavItem = ({ icon: Icon, label, onClick }) => ( /* Giữ nguyên */ <button onClick={onClick} className=\"flex items-center space-x-2 px-4 py-2 text-rose-100 hover:text-rose-300 transition duration-150\"><Icon className=\"h-5 w-5\" /><span>{label}</span></button> );\n\nconst Card = ({ children, className = '' }) => <div className={`bg-white rounded-xl shadow-md overflow-hidden ${className}`}>{children}</div>;\n\n// --- Component Đăng Nhập ---\nconst LoginPage = ({ appState }) => {\n  const { login, notify, loading, setLoading } = appState;\n  const [credentials, setCredentials] = useState({ username: '', password: '' });\n\n  const handleChange = (e) => setCredentials(prev => ({ ...prev, [e.target.name]: e.target.value }));\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (loading) return;\n    setLoading(true);\n    try {\n      const res = await axios.post('/login', credentials);\n      login(res.data.user, res.data.access_token);\n      notify('Đăng nhập thành công!');\n    } catch (error) {\n      console.error('Lỗi đăng nhập:', error.response?.data || error.message);\n      notify('Đăng nhập thất bại.', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto p-8 max-w-md\">\n      <Card className=\"p-8\">\n        <h2 className=\"text-2xl font-bold text-stone-800 mb-6 text-center\">Đăng nhập</h2>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <InputField label=\"Tên đăng nhập\" name=\"username\" type=\"text\" value={credentials.username} onChange={handleChange} required />\n          <InputField label=\"Mật khẩu\" name=\"password\" type=\"password\" value={credentials.password} onChange={handleChange} required />\n          <button type=\"submit\" disabled={loading} className=\"w-full p-3 bg-rose-600 text-white rounded-lg font-medium hover:bg-rose-700 transition duration-150 disabled:bg-gray-400\">\n            {loading ? 'Đang xử lý...' : 'Đăng nhập'}\n          </button>\n        </form>\n      </Card>\n    </div>\n  );\n};\n\n// --- Component Đăng Ký ---\nconst RegisterPage = ({ appState }) => {\n  const { login, notify, loading, setLoading } = appState;\n  const [formData, setFormData] = useState({ username: '', email: '', password: '', role: 'user' });\n\n  const handleChange = (e) => setFormData(prev => ({ ...prev, [e.target.name]: e.target.value }));\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (loading) return;\n    setLoading(true);\n    try {\n      const res = await axios.post('/register', formData);\n      login(res.data.user, res.data.access_token);\n      notify('Đăng ký thành công!');\n    } catch (error) {\n      console.error('Lỗi đăng ký:', error.response?.data || error.message);\n      notify('Đăng ký thất bại.', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto p-8 max-w-md\">\n      <Card className=\"p-8\">\n        <h2 className=\"text-2xl font-bold text-stone-800 mb-6 text-center\">Đăng ký</h2>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <InputField label=\"Tên đăng nhập\" name=\"username\" type=\"text\" value={formData.username} onChange={handleChange} required />\n          <InputField label=\"Email\" name=\"email\" type=\"email\" value={formData.email} onChange={handleChange} required />\n          <InputField label=\"Mật khẩu\" name=\"password\" type=\"password\" value={formData.password} onChange={handleChange} required />\n          <select name=\"role\" value={formData.role} onChange={handleChange} className=\"w-full p-3 border border-stone-300 rounded-lg focus:border-rose-500 focus:ring-1 focus:ring-rose-500\">\n            <option value=\"user\">Người dùng</option>\n            <option value=\"librarian\">Thủ thư</option>\n            <option value=\"admin\">Quản trị</option>\n          </select>\n          <button type=\"submit\" disabled={loading} className=\"w-full p-3 bg-rose-600 text-white rounded-lg font-medium hover:bg-rose-700 transition duration-150 disabled:bg-gray-400\">\n            {loading ? 'Đang xử lý...' : 'Đăng ký'}\n          </button>\n        </form>\n      </Card>\n    </div>\n  );\n};\n\n// --- Component Hồ Sơ ---\nconst ProfilePage = ({ appState }) => {\n  const { user, token, fetchProfile, notify, loading, setLoading } = appState;\n  const [profileData, setProfileData] = useState(user || {});\n  const [editMode, setEditMode] = useState(false);\n\n  useEffect(() => {\n    if (token && !user?.email) fetchProfile(token);\n  }, [token, user, fetchProfile]);\n\n  const handleChange = (e) => setProfileData(prev => ({ ...prev, [e.target.name]: e.target.value }));\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (loading) return;\n    setLoading(true);\n    try {\n      const res = await axios.put('/profile', profileData, { headers: { 'Authorization': `Bearer ${token}` } });\n      setProfileData(res.data);\n      appState.setUser(res.data); // Cập nhật global user\n      notify('Cập nhật hồ sơ thành công!');\n      setEditMode(false);\n    } catch (error) {\n      console.error('Lỗi cập nhật hồ sơ:', error.response?.data || error.message);\n      notify('Không thể cập nhật hồ sơ.', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto p-8 max-w-md\">\n      <Card className=\"p-8\">\n        <h2 className=\"text-2xl font-bold text-stone-800 mb-6 text-center\">Hồ sơ cá nhân</h2>\n        {editMode ? (\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <InputField label=\"Tên đăng nhập\" name=\"username\" type=\"text\" value={profileData.username || ''} onChange={handleChange} required />\n            <InputField label=\"Email\" name=\"email\" type=\"email\" value={profileData.email || ''} onChange={handleChange} required />\n            <div className=\"flex space-x-2\">\n              <button type=\"submit\" disabled={loading} className=\"flex-1 p-3 bg-rose-600 text-white rounded-lg font-medium hover:bg-rose-700 disabled:bg-gray-400\">\n                {loading ? 'Đang lưu...' : 'Lưu'}\n              </button>\n              <button type=\"button\" onClick={() => setEditMode(false)} className=\"flex-1 p-3 bg-gray-500 text-white rounded-lg font-medium hover:bg-gray-600\">\n                Hủy\n              </button>\n            </div>\n          </form>\n        ) : (\n          <div className=\"space-y-4\">\n            <p className=\"text-stone-700\"><strong>Tên đăng nhập:</strong> {profileData.username}</p>\n            <p className=\"text-stone-700\"><strong>Email:</strong> {profileData.email}</p>\n            <p className=\"text-stone-700\"><strong>Vai trò:</strong> {profileData.role}</p>\n            <button onClick={() => setEditMode(true)} className=\"w-full p-3 bg-rose-600 text-white rounded-lg font-medium hover:bg-rose-700\">\n              Chỉnh sửa\n            </button>\n          </div>\n        )}\n      </Card>\n    </div>\n  );\n};\n\n// --- Component Bảng Điều Khiển (Sách) ---\nconst DashboardPage = ({ appState }) => {\n  const { token, isLibrarianOrAdmin, notify, loading, setLoading, fetchProfile } = appState;\n  const [books, setBooks] = useState([]);\n  const [search, setSearch] = useState('');\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [newBookData, setNewBookData] = useState({ title: '', author: '', isbn: '', published_year: '', genre: '', stock: '' });\n\n  useEffect(() => {\n    const loadBooks = async () => {\n      setLoading(true);\n      try {\n        const res = await axios.get('/books', { headers: { 'Authorization': `Bearer ${token}` } });\n        setBooks(res.data);\n      } catch (error) {\n        console.error('Lỗi tải sách:', error.response?.data || error.message);\n        if (error.response?.status === 401 || error.response?.status === 422) {\n          notify('Phiên hết hạn.', 'error');\n          appState.logout();\n        } else {\n          notify('Không thể tải sách.', 'error');\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (token) loadBooks();\n  }, [token, notify, setLoading, appState.logout]);\n\n  const handleSearch = (e) => setSearch(e.target.value.toLowerCase());\n\n  const filteredBooks = books.filter(book => book.title.toLowerCase().includes(search) || book.author.toLowerCase().includes(search));\n\n  const handleAddBook = async (e) => {\n    e.preventDefault();\n    if (loading) return;\n    setLoading(true);\n    try {\n      const newBook = {\n        title: newBookData.title,\n        author: newBookData.author,\n        isbn: newBookData.isbn,\n        published_year: parseInt(newBookData.published_year),\n        genre: newBookData.genre,\n        stock: parseInt(newBookData.stock),\n        available_copies: parseInt(newBookData.stock), // Ban đầu bằng stock\n      };\n      const res = await axios.post('/books', newBook, { headers: { 'Authorization': `Bearer ${token}` } });\n      setBooks(prev => [...prev, res.data]);\n      notify('Thêm sách thành công!');\n      setNewBookData({ title: '', author: '', isbn: '', published_year: '', genre: '', stock: '' });\n      setShowAddForm(false);\n    } catch (error) {\n      console.error('Lỗi thêm sách:', error.response?.data || error.message);\n      notify('Không thể thêm sách.', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleBorrow = async (bookId, bookTitle) => {\n    if (loading) return;\n    setLoading(true);\n    try {\n      await axios.post('/borrow', { book_id: bookId }, { headers: { 'Authorization': `Bearer ${token}` } });\n      setBooks(prev => prev.map(b => b.id === bookId ? { ...b, available_copies: b.available_copies - 1 } : b));\n      notify(`Mượn \"${bookTitle}\" thành công!`);\n    } catch (error) {\n      console.error('Lỗi mượn sách:', error.response?.data || error.message);\n      notify('Không thể mượn sách.', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleChangeNewBook = (e) => setNewBookData(prev => ({ ...prev, [e.target.name]: e.target.value }));\n\n  return (\n    <div className=\"container mx-auto p-8\">\n      <h1 className=\"text-3xl font-bold text-stone-800 mb-6\">Danh sách sách</h1>\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 space-y-4 md:space-y-0\">\n        <input type=\"text\" placeholder=\"Tìm sách theo tiêu đề hoặc tác giả...\" value={search} onChange={handleSearch} className=\"w-full md:w-1/2 p-3 border border-stone-300 rounded-lg focus:border-rose-500 focus:ring-1 focus:ring-rose-500\" />\n        {isLibrarianOrAdmin && (\n          <button onClick={() => setShowAddForm(!showAddForm)} className=\"flex items-center space-x-2 px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700\">\n            <Plus className=\"h-5 w-5\" /><span>{showAddForm ? 'Ẩn form' : 'Thêm sách'}</span>\n          </button>\n        )}\n      </div>\n      {showAddForm && isLibrarianOrAdmin && (\n        <Card className=\"p-6 mb-8\">\n          <h2 className=\"text-xl font-semibold mb-4\">Thêm sách mới</h2>\n          <form onSubmit={handleAddBook} className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <InputField label=\"Tiêu đề\" name=\"title\" type=\"text\" value={newBookData.title} onChange={handleChangeNewBook} required />\n            <InputField label=\"Tác giả\" name=\"author\" type=\"text\" value={newBookData.author} onChange={handleChangeNewBook} required />\n            <InputField label=\"ISBN\" name=\"isbn\" type=\"text\" value={newBookData.isbn} onChange={handleChangeNewBook} required />\n            <InputField label=\"Năm xuất bản\" name=\"published_year\" type=\"number\" value={newBookData.published_year} onChange={handleChangeNewBook} required />\n            <InputField label=\"Thể loại\" name=\"genre\" type=\"text\" value={newBookData.genre} onChange={handleChangeNewBook} required />\n            <InputField label=\"Số lượng\" name=\"stock\" type=\"number\" value={newBookData.stock} onChange={handleChangeNewBook} required />\n            <button type=\"submit\" disabled={loading} className=\"md:col-span-2 p-3 bg-rose-600 text-white rounded-lg font-medium hover:bg-rose-700 disabled:bg-gray-400\">\n              {loading ? 'Đang thêm...' : 'Thêm sách'}\n            </button>\n          </form>\n        </Card>\n      )}\n      {loading ? (\n        <p className=\"text-center text-stone-600\">Đang tải...</p>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {filteredBooks.map(book => (\n            <Card key={book.id} className=\"p-4 flex flex-col justify-between\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-stone-800\">{book.title}</h3>\n                <p className=\"text-stone-600\">Tác giả: {book.author}</p>\n                <p className=\"text-stone-600\">Năm: {book.published_year}</p>\n                <p className=\"text-stone-600\">Thể loại: {book.genre}</p>\n                <p className=\"text-stone-600\">Có sẵn: {book.available_copies} / {book.stock}</p>\n              </div>\n              <button onClick={() => handleBorrow(book.id, book.title)} disabled={book.available_copies === 0 || !token} className={`mt-3 w-full p-2 bg-rose-600 text-white rounded-lg font-medium hover:bg-rose-700 transition duration-150 disabled:bg-gray-400 disabled:cursor-not-allowed`}>\n                {token ? (book.available_copies === 0 ? 'Hết sách' : 'Mượn sách') : 'Đăng nhập để mượn'}\n              </button>\n            </Card>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// --- Component Trang Chủ ---\nconst HomePage = () => ( /* Giữ nguyên */ <div className=\"container mx-auto px-4 py-16 text-center\"><div className=\"max-w-3xl mx-auto\"><h1 className=\"text-5xl font-extrabold text-stone-900 mb-4\">Hệ thống Quản lý Thư viện Nâng cao</h1><p className=\"text-xl text-stone-600 mb-8\">Giải pháp hiện đại...</p><div className=\"grid md:grid-cols-3 gap-6 mt-10\"><FeatureCard icon={User} title=\"Bảo mật theo vai trò\" description=\"Phân quyền...\" /><FeatureCard icon={BookOpen} title=\"Danh mục thời gian thực\" description=\"Xem tình trạng...\" /><FeatureCard icon={Settings} title=\"Hồ sơ nâng cao\" description=\"Hồ sơ người dùng...\" /></div></div></div> );\nconst FeatureCard = ({ icon: Icon, title, description }) => ( /* Giữ nguyên */ <Card className=\"flex flex-col items-center text-center p-6 bg-rose-50 border-t-4 border-rose-600 hover:shadow-lg transition duration-300\"><Icon className=\"w-10 h-10 text-rose-600 mb-3\" /><h3 className=\"text-xl font-semibold text-stone-800 mb-2\">{title}</h3><p className=\"text-stone-600\">{description}</p></Card> );\n\n// --- Các Component \"Giữ chỗ\" cho Admin ---\nconst UserManagementPage = ({ appState }) => ( /* Giữ nguyên */ <div className=\"container mx-auto p-8\"><h1 className=\"text-3xl font-bold text-stone-800\">Quản lý người dùng</h1><p className=\"mt-4 text-stone-600\">(Sắp ra mắt...)</p></div> );\nconst SettingsPage = ({ appState }) => ( /* Giữ nguyên */ <div className=\"container mx-auto p-8\"><h1 className=\"text-3xl font-bold text-stone-800\">Cài đặt</h1><p className=\"mt-4 text-stone-600\">(Sắp ra mắt...)</p></div> );\n\n// --- Component App Chính ---\nconst App = () => {\n  const appState = useAppState();\n  const { route, token, user, isAdmin, logout } = appState;\n\n  // Logic render nội dung chính, xử lý routing chuẩn\n  const renderContent = useMemo(() => {\n    // ---- Khi CHƯA ĐĂNG NHẬP ----\n    if (!token) {\n        switch (route) {\n            case 'login': return <LoginPage appState={appState} />;\n            case 'register': return <RegisterPage appState={appState} />;\n            default: return <HomePage />; // Mọi route khác về home\n        }\n    }\n    // ---- Khi ĐÃ ĐĂNG NHẬP ----\n    switch (route) {\n      case 'profile': return <ProfilePage appState={appState} />;\n      case 'dashboard': return isAdmin ? <AdminDashboard appState={appState} /> : <DashboardPage appState={appState} />; // Admin dashboard hoặc user dashboard (sách)\n      case 'books': return <DashboardPage appState={appState} />; // Luôn là trang sách\n      // Admin routes - Redirect non-admin về trang sách\n      case 'users': return isAdmin ? <UserManagementPage appState={appState} /> : <DashboardPage appState={appState} />;\n      case 'settings': return isAdmin ? <SettingsPage appState={appState} /> : <DashboardPage appState={appState} />;\n      case 'home': return <HomePage />;\n      // Default khi đã đăng nhập: về dashboard tương ứng\n      default: return isAdmin ? <AdminDashboard appState={appState} /> : <DashboardPage appState={appState} />;\n    }\n  // Bỏ 'user' khỏi dependency array vì 'isAdmin' đã phụ thuộc vào 'user'\n  }, [route, token, isAdmin, appState]); // Dependencies chuẩn\n\n  return (\n    <div className=\"min-h-screen bg-stone-100 font-sans\">\n      <Header user={user} setRoute={appState.setRoute} logout={logout} />\n      <main className=\"pb-16\"> {renderContent} </main>\n      <Notification message={appState.message} />\n    </div>\n  );\n};\n\n// --- Component Admin Dashboard ---\nconst AdminDashboard = ({ appState }) => {\n  // Redirect nếu không phải admin\n  if (!appState.isAdmin) return <DashboardPage appState={appState} />;\n  return (\n    <div className=\"container mx-auto p-8 space-y-6\">\n      <h1 className=\"text-3xl font-bold text-stone-800\">Admin Dashboard</h1>\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        {/* Sửa onClick để setRoute('books') */}\n        <DashboardCard title=\"Quản lý sách\" icon={<BookOpen className=\"h-8 w-8 text-rose-600\" />} onClick={() => appState.setRoute('books')} />\n        <DashboardCard title=\"Quản lý người dùng\" icon={<User className=\"h-8 w-8 text-rose-600\" />} onClick={() => appState.setRoute('users')} />\n        <DashboardCard title=\"Cài đặt\" icon={<Settings className=\"h-8 w-8 text-rose-600\" />} onClick={() => appState.setRoute('settings')} />\n      </div>\n    </div>\n  );\n};\n\n// Component Card nhỏ cho Admin Dashboard\nconst DashboardCard = ({ title, icon, onClick }) => ( /* Giữ nguyên */ <button onClick={onClick} className=\"p-6 bg-white rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-200 text-left w-full border-l-4 border-rose-500 hover:border-rose-700 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-opacity-50\" > <div className=\"flex items-center gap-4\"> {icon} <h3 className=\"text-lg font-semibold text-stone-900\">{title}</h3> </div> </button> );\n\n// Component InputField chung\nconst InputField = ({ label, name, type, value, onChange, required = false }) => (\n  <div>\n    <label htmlFor={name} className=\"block text-sm font-medium text-stone-700 mb-1\">{label}</label>\n    <input id={name} name={name} type={type} value={value} onChange={onChange} required={required} className=\"w-full p-3 border border-stone-300 rounded-lg focus:border-rose-500 focus:ring-1 focus:ring-rose-500\" />\n  </div>\n);\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}